# Логистическая платформа
## Поднятие сервера
Пересобрать проект (если необходимо):
```
docker-compose build
```

Запустить оркестр:
```
docker-compose run
```

## Данные для доступа
IP-адреса (для Артёма и Дани):
- 10.1.0.100:8002 -- FastAPI
- 127.0.0.1:80 -- ReactJS
- 10.1.0.102:15432 -- pgAdmin 4
- 10.1.0.100:5432 -- postegres
- 10.1.0.103:8080 -- Apache

IP-адреса (для Роберта):
- 127.0.0.1:80 -- сервер ReactJS
- 127.0.0.1:8002 -- сервер FastAPI
- 127.0.0.1:8080 -- сервер Apache (для php)

Данные для БД:
- user: postgres
- password: postgres
- db: logistic

Данные для pgAdmin:
- email: admin@pgadmin.com
- password: 123456


## API

Коды ответа:
- ``` 200 ``` -- запрос выполнен успешно
- ``` 400 ``` -- обращение к несуществующему методу или с некорректными параметрами
- ``` 401 ``` -- для выполнения запроса требуется авторизация
- ``` 403 ``` -- нет прав для выполнения запроса (напр., пользователь пытается выполнить запрос, доступный только для компании)
- ``` 404 ``` -- данные не найдены
- ``` 500 ``` -- всё, пока, сервер упал

### Методы Python API
#### auth/whoami
Запрос:
```
GET /auth/whoami
```
Ответ:
1. Если пользователь не авторизован:
```
200 OK
{ "role": "guest" }
```

2. Если авторизован клиент:
```
200 OK
{
	"role": "client",
	"data": {
		"id": айдишник,
		"email": "почта",
		"name": "имя",
		"surname": "фамилия",
		"img": "путь к аватарке"
	}
}
```

3. Если авторизована компания:
```
200 OK
{
	"role": "company",
	"data": {
		"id": айдишник,
		"email" "почта",
		"name": "название",
		"img": "путь к аватарке"
	}
}
```

### Методы php API
#### /products/add
Запрос:
```
PUT /products/add
{
	"name": "Имя продукта (обязательный параметр)",
	"price": 300.69,
	"amount": 1488
}
```
Обязательные параметры: name (string, имя продукта), price (double, цена), amount (int, количество)
Дополнительные параметры: size (string в формате "5см x 5см x 5см"), img (файл изображения), category (int, id категории)

Ответ:
1. id созданного продукта:
```
200 OK
{ "id": 213 }
```

2. Требуется авторизация
```
401 Unauthorized
[]
```

3. Недостаточно прав (пользователь является клиентом, а не компанией)
```
403 Forbidden
[]
```
